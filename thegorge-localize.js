var loc_strings = {
    "English": {
        "label_offering": "Offering",
        "label_silveroffering": "Silver Dish Offering",
        "label_craving": "Satisfies Craving",
        "label_stations": "Cooking Stations",
        "label_recipes": "Top Recipes",
        "label_cook": "First Cooked By",
        "label_cook_unknown": "Someone",
        "label_cook_info": "This recipe was originally discovered by %1",
        "label_cook_info_unknown": "This recipe was originally discovered by a nameless someone.",

        "pot": "Cookpot",
        "oven": "Oven",
        "grill": "Grill",

        "all": "All",
        "snack": "Snack",
        "bread": "Bread",
        "veggie": "Veggie",
        "soup": "Soup",
        "fish": "Fish",
        "meat": "Meat",
        "cheese": "Cheese",
        "pasta": "Pasta",
        "sweet": "Dessert",

        "coin1": "Old Coin",
        "coin2": "Sapphire Medallion",
        "coin3": "Red Mark",
        "coin4": "Gnaw's Favor",

        "quagmire_foliage_cooked": "Foliage",
        "quagmire_onion_cooked": "Onion",
        "quagmire_carrot_cooked": "Carrot",
        "quagmire_mushrooms_cooked": "Mushroom",
        "quagmire_crabmeat_cooked": "Crab Meat",
        "quagmire_potato_cooked": "Potato",
        "quagmire_salmon_cooked": "Salmon",
        "quagmire_cookedsmallmeat": "Meat Scraps",
        "twigs": "Twigs",
        "quagmire_turnip_cooked": "Turnip",
        "quagmire_sap": "Sap",
        "rocks": "Rocks",
        "quagmire_goatmilk": "Goat Milk",
        "quagmire_syrup": "Syrup",
        "quagmire_flour": "Flour",
        "quagmire_garlic_cooked": "Garlic",
        "berries_cooked": "Berries",
        "cookedmeat": "Meat",
        "quagmire_tomato_cooked": "Toma Root",
        "quagmire_spotspice_ground": "Spot Spice",

        "dish1": "Bread",
        "dish2": "Chips",
        "dish3": "Veggie Soup",
        "dish4": "Jelly Sandwich",
        "dish5": "Fish Stew",
        "dish6": "Turnip Cake",
        "dish7": "Potato Pancakes",
        "dish8": "Potato Soup",
        "dish9": "Fishball Skewers",
        "dish10": "Meatballs",
        "dish11": "Meat Skewers",
        "dish12": "Stone Soup",
        "dish13": "Croquette",
        "dish14": "Roasted Veggies",
        "dish15": "Meatloaf",
        "dish16": "Carrot Soup",
        "dish17": "Fish Pie",
        "dish18": "Fish And Chips",
        "dish19": "Meat Pie",
        "dish20": "Slider",
        "dish21": "Jam",
        "dish22": "Jelly Roll",
        "dish23": "Carrot Cake",
        "dish24": "Mashed Potatoes",
        "dish25": "Garlic Bread",
        "dish26": "Tomato Soup",
        "dish27": "Sausage",
        "dish28": "Candied Fish",
        "dish29": "Stuffed Mushroom",
        "dish30": "Ratatouille",
        "dish31": "Bruschetta",
        "dish32": "Meat Stew",
        "dish33": "Hamburger",
        "dish34": "Fish Burger",
        "dish35": "Mushroom Burger",
        "dish36": "Fish Steak",
        "dish37": "Curry",
        "dish38": "Spaghetti And Meatballs",
        "dish39": "Lasagna",
        "dish40": "Poached Fish",
        "dish41": "Shepherds Pie",
        "dish42": "Shepherds Pie",
        "dish43": "Pudding",
        "dish44": "Waffles",
        "dish45": "Berry Tart",
        "dish46": "Mac'Ncheese",
        "dish47": "Bagel'Nfish",
        "dish48": "Grilled Cheese",
        "dish49": "Cream Of Mushroom",
        "dish50": "Pierogies",
        "dish51": "Manicotti",
        "dish52": "Cheeseburger",
        "dish53": "Fettuccine",
        "dish54": "Onion Soup",
        "dish55": "Breaded Cutlet",
        "dish56": "Creamy Fish",
        "dish57": "Pizza",
        "dish58": "Pot Roast",
        "dish59": "Crab Cake",
        "dish60": "Steak Frites",
        "dish61": "Shooter Sandwich",
        "dish62": "Bacon Wrapped Meat",
        "dish63": "Crab Roll",
        "dish64": "Meat Wellington",
        "dish65": "Crab Ravioli",
        "dish66": "Caramel Cube",
        "dish67": "Scone",
        "dish68": "Trifle",
        "dish69": "Cheesecake",
        "dish70": "Quagmire Syrup"
    },
    "繁體中文": {
        "__FILTER_CREDIT__": "需求和烹調器具篩選器由 %1 和 %2 製作！",
        "__TRANSLATION_AUTHOR__": "cheewind(https://forums.kleientertainment.com/profile/1125024-cheewind/)",
        "__TRANSLATION_CREDIT__": "%1翻譯由 %2 提供",
        "__CONTRIBUTE__": "想要增加你使用的語言? 在 git 上提交",

        "label_offering": "獻祭",
        "label_silveroffering": "銀器獻祭",
        "label_craving": "滿足需求",
        "label_stations": "烹調器具",
        "label_recipes": "常用食譜",
        "label_cook": "研製者",
        "label_cook_unknown": "某人",

        "pot": "烹煮鍋(Cookpot)",
        "oven": "窯烤爐(Oven)",
        "grill": "燒烤盤(Grill)",

        "all": "全部(All)",
        "snack": "點心(Snack)",
        "bread": "麵包(Bread)",
        "veggie": "蔬菜(Veggie)",
        "soup": "湯(Soup)",
        "fish": "魚(Fish)",
        "meat": "肉(Meat)",
        "cheese": "起司(Cheese)",
        "pasta": "義大利麵(Pasta)",
        "sweet": "甜品(Dessert)",
        "none": "無",
        "coin1": "古老硬币",
        "coin2": "蓝宝石徽章",
        "coin3": "红色印记",
        "coin4": "噬咬的好感",

        "quagmire_foliage_cooked": "蕨叶",
        "quagmire_onion_cooked": "洋葱",
        "quagmire_carrot_cooked": "胡萝卜",
        "quagmire_mushrooms_cooked": "蘑菇",
        "quagmire_crabmeat_cooked": "蟹肉",
        "quagmire_potato_cooked": "土豆",
        "quagmire_salmon_cooked": "鲑鱼",
        "quagmire_cookedsmallmeat": "肉片",
        "twigs": "树枝",
        "quagmire_turnip_cooked": "芜菁",
        "quagmire_sap": "树液",
        "rocks": "岩石",
        "quagmire_goatmilk": "山羊奶",
        "quagmire_syrup": "糖浆",
        "quagmire_flour": "面粉",
        "quagmire_garlic_cooked": "大蒜",
        "berries_cooked": "浆果",
        "cookedmeat": "大肉",
        "quagmire_tomato_cooked": "番茄根",
        "quagmire_spotspice_ground": "斑点香料",

        "dish1": "麵包",
        "dish2": "薯片",
        "dish3": "蔬菜湯",
        "dish4": "果醬三明治",
        "dish5": "燉魚",
        "dish6": "櫻桃蘿蔔蛋糕",
        "dish7": "馬鈴薯煎餅",
        "dish8": "馬鈴薯湯",
        "dish9": "魚丸串",
        "dish10": "肉丸",
        "dish11": "肉串",
        "dish12": "石頭湯",
        "dish13": "炸肉餅",
        "dish14": "烤蔬菜",
        "dish15": "肉餅",
        "dish16": "胡蘿蔔湯",
        "dish17": "魚派",
        "dish18": "炸魚薯條",
        "dish19": "肉派",
        "dish20": "迷你漢堡",
        "dish21": "果醬",
        "dish22": "瑞士卷",
        "dish23": "蘿蔔蛋糕",
        "dish24": "馬鈴薯泥",
        "dish25": "大蒜麵包",
        "dish26": "番茄湯",
        "dish27": "香腸",
        "dish28": "蜜糖魚",
        "dish29": "釀蘑菇",
        "dish30": "普羅旺斯雜燴",
        "dish31": "普切塔",
        "dish32": "燉肉",
        "dish33": "漢堡",
        "dish34": "魚堡",
        "dish35": "蘑菇堡",
        "dish36": "魚排",
        "dish37": "咖哩",
        "dish38": "肉丸義大利麵",
        "dish39": "千層麵",
        "dish40": "嫩煎魚",
        "dish41": "牧羊人派",
        "dish42": "糖果",
        "dish43": "布丁",
        "dish44": "鬆餅",
        "dish45": "莓果塔",
        "dish46": "起司通心麵",
        "dish47": "貝果魚",
        "dish48": "起司三明治",
        "dish49": "奶油蘑菇湯",
        "dish50": "波蘭餃子",
        "dish51": "焗烤義大利通心麵",
        "dish52": "起司漢堡",
        "dish53": "義大利寬板麵",
        "dish54": "洋蔥湯",
        "dish55": "炸肉排",
        "dish56": "奶油魚",
        "dish57": "披薩",
        "dish58": "紅燒牛肉",
        "dish59": "蟹肉餅",
        "dish60": "牛排薯條",
        "dish61": "射手三明治",
        "dish62": "培根裹肉",
        "dish63": "蟹捲",
        "dish64": "威靈頓牛排",
        "dish65": "義大利蟹餃",
        "dish66": "焦糖方塊",
        "dish67": "司康",
        "dish68": "乳脂鬆糕",
        "dish69": "起司蛋糕",
        "dish70": "沼地糖漿"
    },
    "简体中文": {
        "__FILTER_CREDIT__": "需求和烹饪台的过滤器由 %1 和 %2 制作！",
        "__TRANSLATION_AUTHOR__": "cheewind(https://forums.kleientertainment.com/profile/1125024-cheewind/) and Xheepey87(https://forums.kleientertainment.com/profile/793873-xyangy87/)",
        "__TRANSLATION_CREDIT__": "%1翻译由 %2 提供",
        "__CONTRIBUTE__": "想要增加你使用的语言? 在 git 上提交",

        "label_offering": "给予",
        "label_silveroffering": "银器给予",
        "label_craving": "满足的需求",
        "label_stations": "烹饪台",
        "label_recipes": "常用食谱",
        "label_cook": "首次制作",
        "label_cook_unknown": "某人",

        "pot": "烹饪锅",
        "oven": "烤炉",
        "grill": "烤架",

        "all": "全部",
        "snack": "小吃",
        "bread": "面包",
        "veggie": "素食",
        "soup": "汤类",
        "fish": "鱼类",
        "meat": "肉食",
        "cheese": "奶酪",
        "pasta": "面条",
        "sweet": "甜食",
        "none": "无",

        "coin1": "古老硬币",
        "coin2": "蓝宝石徽章",
        "coin3": "红色印记",
        "coin4": "噬咬的好感",

        "quagmire_foliage_cooked": "蕨叶",
        "quagmire_onion_cooked": "洋葱",
        "quagmire_carrot_cooked": "胡萝卜",
        "quagmire_mushrooms_cooked": "蘑菇",
        "quagmire_crabmeat_cooked": "蟹肉",
        "quagmire_potato_cooked": "土豆",
        "quagmire_salmon_cooked": "鲑鱼",
        "quagmire_cookedsmallmeat": "肉片",
        "twigs": "树枝",
        "quagmire_turnip_cooked": "芜菁",
        "quagmire_sap": "树液",
        "rocks": "岩石",
        "quagmire_goatmilk": "山羊奶",
        "quagmire_syrup": "糖浆",
        "quagmire_flour": "面粉",
        "quagmire_garlic_cooked": "大蒜",
        "berries_cooked": "浆果",
        "cookedmeat": "大肉",
        "quagmire_tomato_cooked": "番茄根",
        "quagmire_spotspice_ground": "斑点香料",

        "dish1": "面包",
        "dish2": "薯片",
        "dish3": "蔬菜汤",
        "dish4": "果酱三明治",
        "dish5": "鱼汤",
        "dish6": "芜菁糕",
        "dish7": "土豆饼",
        "dish8": "土豆汤",
        "dish9": "鱼丸串",
        "dish10": "肉丸",
        "dish11": "肉串",
        "dish12": "石头汤",
        "dish13": "炸丸子",
        "dish14": "烤蔬菜",
        "dish15": "肉饼",
        "dish16": "胡萝卜汤",
        "dish17": "鱼派",
        "dish18": "炸鱼薯条",
        "dish19": "肉派",
        "dish20": "迷你汉堡",
        "dish21": "果酱",
        "dish22": "果冻卷",
        "dish23": "胡萝卜蛋糕",
        "dish24": "土豆泥",
        "dish25": "蒜香面包",
        "dish26": "番茄汤",
        "dish27": "香肠",
        "dish28": "糖渍鱼",
        "dish29": "蘑菇包菜",
        "dish30": "蔬菜杂烩",
        "dish31": "意式烤面包",
        "dish32": "肉汤",
        "dish33": "汉堡",
        "dish34": "鱼肉汉堡",
        "dish35": "蘑菇汉堡",
        "dish36": "鱼排",
        "dish37": "咖哩",
        "dish38": "意式肉丸面",
        "dish39": "千层面",
        "dish40": "煮鱼片",
        "dish41": "肉馅薯派",
        "dish42": "糖果",
        "dish43": "布丁",
        "dish44": "华夫饼",
        "dish45": "莓果挞",
        "dish46": "奶酪意面",
        "dish47": "鱼肉面包圈",
        "dish48": "烤奶酪",
        "dish49": "奶油蘑菇汤",
        "dish50": "波兰饺子",
        "dish51": "意式通心面",
        "dish52": "奶酪汉堡",
        "dish53": "意式宽面条",
        "dish54": "洋葱汤",
        "dish55": "炸肉排",
        "dish56": "奶油鱼",
        "dish57": "比萨饼",
        "dish58": "罐炖烤肉",
        "dish59": "蟹肉饼",
        "dish60": "肉排薯条",
        "dish61": "射手三明治",
        "dish62": "培根卷肉",
        "dish63": "蟹肉卷",
        "dish64": "威灵顿肉排",
        "dish65": "蟹肉馄饨",
        "dish66": "焦糖方糕",
        "dish67": "司康饼",
        "dish68": "乳脂松糕",
        "dish69": "奶酪蛋糕",
        "dish70": "糖浆"
    },
    "Русский": {
        "label_offering": "Подношение",
        "label_silveroffering": "Подношение в серебре",
        "label_craving": "Удовлетворяет желание",
        "label_stations": "Кухонная станция",
        "label_recipes": "Лучшие рецепты",
        "label_cook": "Впервые приготовлено",
        "label_cook_unknown": "Кто-то",
        "label_cook_info": "Этот рецепт был первоначально обнаружен %1",
        "label_cook_info_unknown": "Этот рецепт был первоначально обнаружен безымянным человеком.",

        "pot": "Казан",
        "oven": "Печь",
        "grill": "Гриль",

        "all": "Все",
        "snack": "Закуска",
        "bread": "Хлеб",
        "veggie": "Овощи",
        "soup": "Суп",
        "fish": "Рыба",
        "meat": "Мясо",
        "cheese": "Сыр",
        "pasta": "Макароны",
        "sweet": "Десерт",
        "none": "Пусто",

        "coin1": "Старая монета",
        "coin2": "Сапфировый медальон",
        "coin3": "Красный значок",
        "coin4": "Сувенир Глотки",

        "quagmire_foliage_cooked": "Листва",
        "quagmire_onion_cooked": "Лук",
        "quagmire_carrot_cooked": "Морковь",
        "quagmire_mushrooms_cooked": "Гриб",
        "quagmire_crabmeat_cooked": "Крабовое мясо",
        "quagmire_potato_cooked": "Картошка",
        "quagmire_salmon_cooked": "Лосось",
        "quagmire_cookedsmallmeat": "Куски мяса",
        "twigs": "Ветки",
        "quagmire_turnip_cooked": "Репа",
        "quagmire_sap": "Сок",
        "rocks": "Камни",
        "quagmire_goatmilk": "Козье молоко",
        "quagmire_syrup": "Сироп",
        "quagmire_flour": "Мука",
        "quagmire_garlic_cooked": "Чеснок",
        "berries_cooked": "Ягоды",
        "cookedmeat": "Мясо",
        "quagmire_tomato_cooked": "Корень томата",
        "quagmire_spotspice_ground": "Пятнистая приправа",

        "dish1": "Хлеб",
        "dish2": "Чипсы",
        "dish3": "Вегетарианский суп",
        "dish4": "Сэндвич с джемом",
        "dish5": "Тушеная рыба",
        "dish6": "Реповые пирожные",
        "dish7": "Картофельные блины",
        "dish8": "Картофельный суп",
        "dish9": "Рыбные шарики",
        "dish10": "Мясные шарики",
        "dish11": "Шашлык",
        "dish12": "Суп из камня",
        "dish13": "Крокеты",
        "dish14": "Жареные овощи",
        "dish15": "Мясной рулет",
        "dish16": "Морковный суп",
        "dish17": "Рыбный пирог",
        "dish18": "Рыба и фри",
        "dish19": "Мясной пирог",
        "dish20": "Ползуны",
        "dish21": "Джем",
        "dish22": "Рулет с желе",
        "dish23": "Морковный торт",
        "dish24": "Картофельное пюре",
        "dish25": "Чесночный хлеб",
        "dish26": "Томатный суп",
        "dish27": "Сосиски",
        "dish28": "Засахаренная рыба",
        "dish29": "Фаршированные грибы",
        "dish30": "Рататуй",
        "dish31": "Брускетта",
        "dish32": "Мясное рагу",
        "dish33": "Гамбургер",
        "dish34": "Рыбный бургер",
        "dish35": "Грибной бургер",
        "dish36": "Рыбный стейк",
        "dish37": "Карри",
        "dish38": "Спагетти с фрикадельками",
        "dish39": "Лазанья",
        "dish40": "Варёная рыба",
        "dish41": "Пирог пастуха",
        "dish42": "Конфеты",
        "dish43": "Пудинг",
        "dish44": "Вафли",
        "dish45": "Ягодное пирожное",
        "dish46": "Макароны с сыром",
        "dish47": "Рыба с булочкой",
        "dish48": "Жареный сыр",
        "dish49": "Грибной суп",
        "dish50": "Вареники",
        "dish51": "Маникотти",
        "dish52": "Чизбургер",
        "dish53": "Феттуччине",
        "dish54": "Луковый суп",
        "dish55": "Панированная котлета",
        "dish56": "Рыба под кремом",
        "dish57": "Пицца",
        "dish58": "Тушеное мясо",
        "dish59": "Крабовый пирог",
        "dish60": "Стейк с картошкой",
        "dish61": "Шутер-сэндвич",
        "dish62": "Мясо в беконе",
        "dish63": "Крабовый рулет",
        "dish64": "Говядина «Веллингтон»",
        "dish65": "Крабовые пельмени",
        "dish66": "Ириска",
        "dish67": "Скон",
        "dish68": "Трюфель",
        "dish69": "Чизкейк",
        "dish70": "Сироп"
    },
    "Português (Br)": {
        "__TRANSLATION_AUTHOR__": "Kynoox_(https://forums.kleientertainment.com/profile/978076-kynoox_/)",
        "__TRANSLATION_CREDIT__": "%1 by %2",

        "label_offering": "Oferenda",
        "label_silveroffering": "Oferenda com prato de prata",
        "label_craving": "Oferenda Satisfaz",
        "label_stations": "Estações de Cozinha",
        "label_recipes": "Melhores Receitas",
        "label_cook": "Cozinhado a primeira vez por",
        "label_cook_unknown": "Alguém",
        "label_cook_info": "Essa receita foi descoberta originalmente por %1",
        "label_cook_info_unknown": "Essa receita foi descoberta originalmente por alguém sem nome.",

        "pot": "Panela",
        "oven": "Forno",
        "grill": "Grelha",

        "all": "Todos",
        "snack": "Lanche",
        "bread": "Pão",
        "veggie": "Vegetal",
        "soup": "Sopa",
        "fish": "Peixe",
        "meat": "Carne",
        "cheese": "Queija",
        "pasta": "Massa",
        "sweet": "Sobremesa",

        "coin1": "Moeda Antiga",
        "coin2": "Medalhão de Safira",
        "coin3": "Marco Vermelho",
        "coin4": "Favor do Gnaw",

        "quagmire_foliage_cooked": "Folhagem",
        "quagmire_onion_cooked": "Cebola",
        "quagmire_carrot_cooked": "Cenoura",
        "quagmire_mushrooms_cooked": "Cogumelo",
        "quagmire_crabmeat_cooked": "Carne de Carangueijo",
        "quagmire_potato_cooked": "Batata",
        "quagmire_salmon_cooked": "Salmão",
        "quagmire_cookedsmallmeat": "Pedaços de Carne",
        "twigs": "Gravetos",
        "quagmire_turnip_cooked": "Nabo",
        "quagmire_sap": "Seiva",
        "rocks": "Pedras",
        "quagmire_goatmilk": "Leite de Cabra",
        "quagmire_syrup": "Xarope",
        "quagmire_flour": "Farinha",
        "quagmire_garlic_cooked": "Garlic",
        "berries_cooked": "Bagas",
        "cookedmeat": "Carne",
        "quagmire_tomato_cooked": "Tomate",
        "quagmire_spotspice_ground": "Tempero",
    }
}

var loc_selected_language = "English";

function GorgeRecipebookLocalize() {

    // Add language buttons
    var btn_language_div = document.createElement("div");
    $(btn_language_div).attr('class', 'btn_language_div');
    for (var language in loc_strings) {
        let button = document.createElement("div");
        $(button).attr('class', "button language_btn");
        $(button).attr('for', language);
        $(button).text(language);
        $(btn_language_div).append(button);
    }
    $('.recipelist').append(btn_language_div);

    // Look for a cookie
    var language = loc_get_cookie("language");
    if (language != null && loc_strings[language] != null) loc_set_language(language);

    // Select the corresponding button
    $(".language_btn[for='" + loc_selected_language + "']").addClass("selected");

    // Setup button listener
    $('.language_btn').on('click', e => {
        // Unselect others
        $('.language_btn').removeClass('selected');

        $(e.target).addClass('selected');

        loc_set_language($(e.target).attr("for"));
    });
}

function loc_set_language(language_key) {
    loc_selected_language = language_key;

    // Update filter credit
    if (has_loc_string("__FILTER_CREDIT__")) {
        let filterCredit = loc_string("__FILTER_CREDIT__");
        filterCredit = filterCredit.replace("%1", '<a href="https://forums.kleientertainment.com/profile/1125024-cheewind/">cheewind</a>')
            .replace("%2", '<a href="https://forums.kleientertainment.com/profile/988803-adai1198/">adai1198</a>');
        $('.filter-credits').html(filterCredit);
    }

    // Update translation credit
    if (has_loc_string("__TRANSLATION_AUTHOR__")) {
        let authors = loc_string("__TRANSLATION_AUTHOR__");
        let authorList = authors.split(',');
        let authorHtml = "";
        for (let i in authorList) {
            let author = authorList[i];
            let [_, name, link] = /([^\(]+)\(([^\)]+)\)/.exec(author);
            authorHtml += `${i != 0 ? ", ":""}<a href="${link}">${name}</a>`;
        }
        let translationCredit = loc_string("__TRANSLATION_CREDIT__")
            .replace("%1", loc_selected_language).replace("%2", authorHtml);
        $('.translation-credits').html(translationCredit + "<br>");
    }

    // Update contribute
    if (has_loc_string("__TRANSLATION_AUTHOR__"))
        $('.contribute').html(loc_string("__CONTRIBUTE__")
            .replace('git', '<a href="https://github.com/kleientertainment/TheGorgeRecipeBook">git</a>') + "<br>");

    // Update craving buttons
    var craving_elems = $('.btn_cat_div label.button');
    for (var i = 0; i < craving_elems.length; i++) {
        $(craving_elems[i]).text(loc_string($(craving_elems[i]).attr('for')));
    }
    for (let key in craving_names) {
        craving_names[key] = loc_string(key);
    }

    // Update stations
    var station_elems = $('.btn_station_div label.button');
    for (var i = 0; i < station_elems.length; i++) {
        $(station_elems[i]).text(loc_string($(station_elems[i]).attr('for')));
    }
    for (let key in cooking_station_names) {
        cooking_station_names[key] = loc_string(key);
    }

    // Update Info
    $('.dish-tribute > label:first').text(loc_string('label_offering'));
    $('.dish-plate > label:first').text(loc_string('label_silveroffering'));
    $('.dish-craving > label:first').text(loc_string('label_craving'));
    $('.dish-station > label:first').text(loc_string('label_stations'));
    $('.dish-recipes > label:first').text(loc_string('label_recipes'));
    $('.dish-finder > label:first').text(loc_string('label_cook'));

    // Update Dish title
    $('.recipelist-dishes > li').each((_, e) => {
        let index = Number.parseInt($(e).data('index'));
        $(e).attr('title', discovered_dishes[index].name);
    });

    // Update translatable text elements
    var elements = $("[i18n-text]");
    for (let i = 0; i < elements.length; i++) {
        let key = $(elements[i]).attr("i18n-text");
        $(elements[i]).text(loc_string(key));
    }

    // Update translatable title elements
    var elements = $("[i18n-title]");
    for (let i = 0; i < elements.length; i++) {
        let key = $(elements[i]).attr("i18n-title");
        let arg = $(elements[i]).attr("i18n-argument");
        let title = loc_string(key);
        if (arg) {
            title = title.replace('%1', arg);
        }
        $(elements[i]).attr("title", title);
    }


    // Set a cookie
    loc_set_cookie("language", loc_selected_language, 6);
}

function loc_set_cookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function loc_get_cookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}

function has_loc_string(key) {
    return key in loc_strings[loc_selected_language];
}

function loc_string(key) {
    return loc_strings[loc_selected_language][key] ||
        loc_strings["English"][key] || "Invalid String";
}
